{"version":3,"sources":["findAndReplaceDOMText.js"],"names":["window","findAndReplaceDOMText","PORTION_MODE_RETAIN","PORTION_MODE_FIRST","doc","document","exposed","regex","node","replacement","captureGroup","elFilter","nodeType","arguments","length","isReplacementFunction","original","portion","match","text","startIndex","instance","find","wrap","replace","prepMatch","m","mi","cg","index","indexOf","endIndex","filterElements","revert","apply","options","Finder","portionMode","this","reverts","matches","search","processMatches","prototype","matchIndex","getAggregateText","RegExp","String","global","exec","push","Error","elementFilter","getText","data","txt","firstChild","nextSibling","startPortion","endPortion","doAvoidNode","innerPortions","curNode","shift","atIndex","portionIndex","out","substring","indexInMatch","indexInNode","endIndexInNode","isEnd","replaceMatch","parentNode","l","prepareReplacementString","string","$0","t","input","getPortionReplacementNode","wrapper","clone","createElement","innerHTML","outerHTML","XMLSerializer","serializeToString","createTextNode","el","appendChild","preceedingTextNode","followingTextNode","matchStartNode","matchEndNode","insertBefore","newNode","removeChild","previousSibling","replaceChild","firstNode","innerNodes","i","innerNode","lastNode"],"mappings":"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"}