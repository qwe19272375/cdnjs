window.findAndReplaceDOMText=function(){function e(e,n,t,r,d){var i,o=[],a=function e(n,t){if(3===n.nodeType)return n.data;if(t&&!t(n))return"";var r="";if(n=n.firstChild)for(;r+=e(n,t),n=n.nextSibling;);return r}(n,d),f=function(e){var p;if(v=[],"function"!=typeof e){var r=e.nodeType?e:document.createElement(e);p=function(e){var n,t=document.createElement("div");return t.innerHTML=r.outerHTML||(new XMLSerializer).serializeToString(r),n=t.firstChild,e&&n.appendChild(document.createTextNode(e)),n}}else p=e;return function(e){var n=e.startNode,t=e.endNode,r=e.matchIndex;if(n===t){var d=n;if(0<e.startNodeIndex){var i=document.createTextNode(d.data.substring(0,e.startNodeIndex));d.parentNode.insertBefore(i,d)}var o=p(e.match[0],r,e.match[0]);if(d.parentNode.insertBefore(o,d),e.endNodeIndex<d.length){var a=document.createTextNode(d.data.substring(e.endNodeIndex));d.parentNode.insertBefore(a,d)}return d.parentNode.removeChild(d),v.push(function(){var e=o.parentNode;e.insertBefore(o.firstChild,o),e.removeChild(o),e.normalize()}),o}for(var i=document.createTextNode(n.data.substring(0,e.startNodeIndex)),a=document.createTextNode(t.data.substring(e.endNodeIndex)),f=p(n.data.substring(e.startNodeIndex),r,e.match[0]),s=[],h=0,l=e.innerNodes.length;h<l;++h){var u=e.innerNodes[h],c=p(u.data,r,e.match[0]);u.parentNode.replaceChild(c,u),s.push(c)}var N=p(t.data.substring(0,e.endNodeIndex),r,e.match[0]);return n.parentNode.insertBefore(i,n),n.parentNode.insertBefore(f,n),n.parentNode.removeChild(n),t.parentNode.insertBefore(N,t),t.parentNode.insertBefore(a,t),t.parentNode.removeChild(t),v.push(function(){s.unshift(f),s.push(N);for(var e=0,n=s.length;e<n;++e){var t=s[e],r=t.parentNode;r.insertBefore(t.firstChild,t),r.removeChild(t),r.normalize()}}),N}}(t);if(a){if(e.global)for(;i=e.exec(a);)o.push(s(i,r));else i=a.match(e),o.push(s(i,r));o.length&&function(e,n,t,r){var d,i,o,a,f,s=[],h=0,l=e,u=n.shift(),c=0;e:for(;;){if(3===l.nodeType&&(!i&&l.length+h>=u[1]?(i=l,a=u[1]-h):d&&s.push(l),!d&&l.length+h>u[0]&&(d=l,o=u[0]-h),h+=l.length),f=1===l.nodeType&&r&&!r(l),d&&i){if(l=t({startNode:d,startNodeIndex:o,endNode:i,endNodeIndex:a,innerNodes:s,match:u[2],matchIndex:c}),h-=i.length-a,i=d=null,s=[],u=n.shift(),c++,!u)break}else if(!f&&(l.firstChild||l.nextSibling)){l=l.firstChild||l.nextSibling;continue}for(;;){if(l.nextSibling){l=l.nextSibling;break}if(l.parentNode===e)break e;l=l.parentNode}}}(n,o,f,d)}}function s(e,n){if(n=n||0,!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";var t=e.index;if(0<n){var r=e[n];if(!r)throw"Invalid capture group";t+=e[0].indexOf(r),e[0]=r}return[t,t+e[0].length,[e[0]]]}var v;return e.revert=function(){for(var e=0,n=v.length;e<n;++e)v[e]();v=[]},e}();