var Thrift={Type:{STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,UTF7:11,STRUCT:12,MAP:13,SET:14,LIST:15,UTF8:16,UTF16:17},MessageType:{CALL:1,REPLY:2,EXCEPTION:3}};Thrift.TException={},Thrift.TException.prototype={initialize:function(t,i){this.message=t,this.code=null==i?0:i}},Thrift.TApplicationExceptionType={UNKNOWN:0,UNKNOWN_METHOD:1,INVALID_MESSAGE_TYPE:2,WRONG_METHOD_NAME:3,BAD_SEQUENCE_ID:4,MISSING_RESULT:5},Thrift.TApplicationException=function(t,i){this.message=t,this.code=null==i?0:i},Thrift.TApplicationException.prototype={read:function(t){var i,r=t.readStructBegin(fname);for(this.fname=r.fname;;){if(r=t.readFieldBegin(),r.ftype==TType.STOP)break;var i=r.fid;switch(i){case 1:r.ftype==Type.STRING?(r=t.readString(),this.message=r.value):r=t.skip(r.ftype);break;case 2:r.ftype==Type.I32?(r=t.readI32(),this.code=r.value):r=t.skip(r.ftype);break;default:r=t.skip(r.ftype)}t.readFieldEnd()}t.readStructEnd()},write:function(t){t.writeStructBegin("TApplicationException"),this.message&&(t.writeFieldBegin("message",Type.STRING,1),t.writeString(this.getMessage()),t.writeFieldEnd()),this.code&&(t.writeFieldBegin("type",Type.I32,2),t.writeI32(this.code),t.writeFieldEnd()),t.writeFieldStop(),t.writeStructEnd()},getCode:function(){return this.code},getMessage:function(){return this.message}},Thrift.Transport=function(t){this.url=t,this.wpos=0,this.rpos=0,this.send_buf="",this.recv_buf=""},Thrift.Transport.prototype={getXmlHttpRequestObject:function(){try{return new XMLHttpRequest}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}throw"Your browser doesn't support the XmlHttpRequest object.  Try upgrading to Firefox."},flush:function(){if(void 0==this.url||""==this.url)return this.send_buf;var t=this.getXmlHttpRequestObject();if(t.overrideMimeType&&t.overrideMimeType("application/json"),t.open("POST",this.url,!1),t.send(this.send_buf),4!=t.readyState)throw"encountered an unknown ajax ready state: "+t.readyState;if(200!=t.status)throw"encountered a unknown request status: "+t.status;this.recv_buf=t.responseText,this.recv_buf_sz=this.recv_buf.length,this.wpos=this.recv_buf.length,this.rpos=0},setRecvBuffer:function(t){this.recv_buf=t,this.recv_buf_sz=this.recv_buf.length,this.wpos=this.recv_buf.length,this.rpos=0},isOpen:function(){return!0},open:function(){},close:function(){},read:function(t){var i=this.wpos-this.rpos;if(0==i)return"";var r=t;i<t&&(r=i);var e=this.read_buf.substr(this.rpos,r);return this.rpos+=r,e},readAll:function(){return this.recv_buf},write:function(t){this.send_buf=t},getSendBuffer:function(){return this.send_buf}},Thrift.Protocol=function(t){this.transport=t},Thrift.Protocol.Type={},Thrift.Protocol.Type[Thrift.Type.BOOL]='"tf"',Thrift.Protocol.Type[Thrift.Type.BYTE]='"i8"',Thrift.Protocol.Type[Thrift.Type.I16]='"i16"',Thrift.Protocol.Type[Thrift.Type.I32]='"i32"',Thrift.Protocol.Type[Thrift.Type.I64]='"i64"',Thrift.Protocol.Type[Thrift.Type.DOUBLE]='"dbl"',Thrift.Protocol.Type[Thrift.Type.STRUCT]='"rec"',Thrift.Protocol.Type[Thrift.Type.STRING]='"str"',Thrift.Protocol.Type[Thrift.Type.MAP]='"map"',Thrift.Protocol.Type[Thrift.Type.LIST]='"lst"',Thrift.Protocol.Type[Thrift.Type.SET]='"set"',Thrift.Protocol.RType={},Thrift.Protocol.RType.tf=Thrift.Type.BOOL,Thrift.Protocol.RType.i8=Thrift.Type.BYTE,Thrift.Protocol.RType.i16=Thrift.Type.I16,Thrift.Protocol.RType.i32=Thrift.Type.I32,Thrift.Protocol.RType.i64=Thrift.Type.I64,Thrift.Protocol.RType.dbl=Thrift.Type.DOUBLE,Thrift.Protocol.RType.rec=Thrift.Type.STRUCT,Thrift.Protocol.RType.str=Thrift.Type.STRING,Thrift.Protocol.RType.map=Thrift.Type.MAP,Thrift.Protocol.RType.lst=Thrift.Type.LIST,Thrift.Protocol.RType.set=Thrift.Type.SET,Thrift.Protocol.Version=1,Thrift.Protocol.prototype={getTransport:function(){return this.transport},writeMessageBegin:function(t,i,r){this.tstack=new Array,this.tpos=new Array,this.tstack.push([Thrift.Protocol.Version,'"'+t+'"',i,r])},writeMessageEnd:function(){var t=this.tstack.pop();this.wobj=this.tstack.pop(),this.wobj.push(t),this.wbuf="["+this.wobj.join(",")+"]",this.transport.write(this.wbuf)},writeStructBegin:function(t){this.tpos.push(this.tstack.length),this.tstack.push({})},writeStructEnd:function(){var t=this.tpos.pop(),i=this.tstack[t],r="{",e=!0;for(var s in i)e?e=!1:r+=",",r+=s+":"+i[s];r+="}",this.tstack[t]=r},writeFieldBegin:function(t,i,r){this.tpos.push(this.tstack.length),this.tstack.push({fieldId:'"'+r+'"',fieldType:Thrift.Protocol.Type[i]})},writeFieldEnd:function(){var t=this.tstack.pop(),i=this.tstack.pop();this.tstack[this.tstack.length-1][i.fieldId]="{"+i.fieldType+":"+t+"}",this.tpos.pop()},writeFieldStop:function(){},writeMapBegin:function(t,i,r){this.tpos.push(this.tstack.length),this.tstack.push([Thrift.Protocol.Type[t],Thrift.Protocol.Type[i],0])},writeMapEnd:function(){var t=this.tpos.pop();if(t!=this.tstack.length){(this.tstack.length-t-1)%2!=0&&this.tstack.push("");var i=(this.tstack.length-t-1)/2;this.tstack[t][this.tstack[t].length-1]=i;for(var r="{",e=!0;this.tstack.length>t+1;){var s=this.tstack.pop(),h=this.tstack.pop();e?e=!1:r+=",",r+='"'+h+'":'+s}r+="}",this.tstack[t].push(r),this.tstack[t]="["+this.tstack[t].join(",")+"]"}},writeListBegin:function(t,i){this.tpos.push(this.tstack.length),this.tstack.push([Thrift.Protocol.Type[t],i])},writeListEnd:function(){for(var t=this.tpos.pop();this.tstack.length>t+1;){var i=this.tstack[t+1];this.tstack.splice(t+1,1),this.tstack[t].push(i)}this.tstack[t]="["+this.tstack[t].join(",")+"]"},writeSetBegin:function(t,i){this.tpos.push(this.tstack.length),this.tstack.push([Thrift.Protocol.Type[t],i])},writeSetEnd:function(){for(var t=this.tpos.pop();this.tstack.length>t+1;){var i=this.tstack[t+1];this.tstack.splice(t+1,1),this.tstack[t].push(i)}this.tstack[t]="["+this.tstack[t].join(",")+"]"},writeBool:function(t){this.tstack.push(t?1:0)},writeByte:function(t){this.tstack.push(t)},writeI16:function(t){this.tstack.push(t)},writeI32:function(t){this.tstack.push(t)},writeI64:function(t){this.tstack.push(t)},writeDouble:function(t){this.tstack.push(t)},writeString:function(t){if(null===t)this.tstack.push(null);else{for(var i="",r=0;r<t.length;r++){var e=t.charAt(r);i+='"'===e?'\\"':"\\"===e?"\\\\":"\b"===e?"\\b":"\f"===e?"\\f":"\n"===e?"\\n":"\r"===e?"\\r":"\t"===e?"\\t":e}this.tstack.push('"'+i+'"')}},writeBinary:function(t){this.writeString(t)},readMessageBegin:function(name,messageType,seqid){this.rstack=new Array,this.rpos=new Array,this.robj=eval(this.transport.readAll());var r={},version=this.robj.shift();if(version!=Thrift.Protocol.Version)throw"Wrong thrift protocol version: "+version;return r.fname=this.robj.shift(),r.mtype=this.robj.shift(),r.rseqid=this.robj.shift(),this.rstack.push(this.robj.shift()),r},readMessageEnd:function(){},readStructBegin:function(t){var i={};return i.fname="",this.rstack[this.rstack.length-1]instanceof Array&&this.rstack.push(this.rstack[this.rstack.length-1].shift()),i},readStructEnd:function(){this.rstack[this.rstack.length-2]instanceof Array&&this.rstack.pop()},readFieldBegin:function(){var t={},i=-1,r=Thrift.Type.STOP;for(var e in this.rstack[this.rstack.length-1])if(null!=e){i=parseInt(e),this.rpos.push(this.rstack.length);var s=this.rstack[this.rstack.length-1][i];delete this.rstack[this.rstack.length-1][i],this.rstack.push(s);break}if(i!=-1)for(var e in this.rstack[this.rstack.length-1])null!=Thrift.Protocol.RType[e]&&(r=Thrift.Protocol.RType[e],this.rstack[this.rstack.length-1]=this.rstack[this.rstack.length-1][e]);return t.fname="",t.ftype=r,t.fid=i,t},readFieldEnd:function(){for(var t=this.rpos.pop();this.rstack.length>t;)this.rstack.pop()},readMapBegin:function(t,i,r){var e=this.rstack.pop(),s={};return s.ktype=Thrift.Protocol.RType[e.shift()],s.vtype=Thrift.Protocol.RType[e.shift()],s.size=e.shift(),this.rpos.push(this.rstack.length),this.rstack.push(e.shift()),s},readMapEnd:function(){this.readFieldEnd()},readListBegin:function(t,i){var r=this.rstack[this.rstack.length-1],e={};return e.etype=Thrift.Protocol.RType[r.shift()],e.size=r.shift(),this.rpos.push(this.rstack.length),this.rstack.push(r),e},readListEnd:function(){this.readFieldEnd()},readSetBegin:function(t,i){return this.readListBegin(t,i)},readSetEnd:function(){return this.readListEnd()},readBool:function(){var t=this.readI32();return null!=t&&"1"==t.value?t.value=!0:t.value=!1,t},readByte:function(){return this.readI32()},readI16:function(){return this.readI32()},readI32:function(t){void 0==t&&(t=this.rstack[this.rstack.length-1]);var i={};if(t instanceof Array)0==t.length?i.value=void 0:i.value=t.shift();else if(t instanceof Object){for(var r in t)if(null!=r){this.rstack.push(t[r]),delete t[r],i.value=r;break}}else i.value=t;return i},readI64:function(){return this.readI32()},readDouble:function(){return this.readI32()},readString:function(){var t=this.readI32();return t},readBinary:function(){return this.readString()},skip:function(t){throw"skip not supported yet"}};
//# sourceMappingURL=thrift.min.js.map